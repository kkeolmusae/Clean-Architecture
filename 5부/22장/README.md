# 22장 클린 아키텍처
아키텍처의 목표는 "관심사의 분리" 이다.

소프트웨어를 계층으로 분리함으로써 관심사의 분리라는 목표를 달성해야 한다.

![clean architecture](~/../../../image/clean_architecture.png)

안으로 들어갈수록 고수준의 소프트웨어이다. 

소스 코드 의존성은 반드시 안쪽으로, 고수준의 정책을 향해야 한다. (**의존성 규칙**)

- 내부의 원에 속한 요소는 외부의 원에 속한 것에 대해서 알면 안된다.
- 외부의 원에 선언된 데이터 형식도 내부의 원에서 사용해서는 안된다.
- => 외부에서 내부를 가져다 쓰는 구조

</br>

## Entity

메서드를 가지는 객체이거나 일련의 데이터 구조와 함수의 집합일 수 있다.

가장 일반적이며 고수준인 규칙을 캡슐화한다.

</br>

## Use Case
애플리케이션에 특화된 business logic (= business role = 업무규칙)을 포함한다.

Entity로 들어오고 나가는 데이터 흐름을 조정하며, entity가 자신의 business logic 을 사용해서 usecase 의 목적을 달성하게 이끈다.

use case에서 발생한 변경이 entity 에 영향을 줘서는 안된다. 

DB, UI, framework 와 같은 외부 요소에서 발생한 변경이 use case 계층에 영향을 줘서도 안된다.

</br>

## Interface Adaptor
Adapter는 데이터를 use case와 entity에게 가장 편리한형식에서 DB나 웹 같은 외부 에이전시에게 가장 편리한 형식으로 변환한다. 

이 계층은 MVC 아키텍처를 모두 포괄한다. (Presenter, View, Controller)

이 Interface Adaptor 계층에 속한 어떤 코드도 DB에 대해서 알아서는 안된다. 

</br>

## Framework & Driver
이 계층은 모든 세부사항이 위치한다.

</br></br>

의존성 규칙은 어떤 경우에도 적용되어야 하며, 소스코드 의존성은 항상 한쪽을 향한다. 

안쪽으로 이동할수록 추상화와 정책의 수준은 높아진다. 가장 안쪽 원은 가장 범용적이며 높은 수준을 가진다.

가장 바깥쪽 원은 저수준의 구체적인 세부사항으로 구성된다.

</br>

### 결론
소프트웨어를 계층으로 분리하고 의존성 규칙을 준수하자.