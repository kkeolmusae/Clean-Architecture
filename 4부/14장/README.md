# 14장 컴포넌트 결합
세 가지 원칙에 대해서 설명할 예정이다. 세 원칙은 컴포넌트 사이의 관계를 설명한다.

</br>

### ADP: 의존성 비순환 원칙
컴포넌트 의존성 그래프에 순환(cycle)이 있어서는 안된다. 

컴포넌트 간의 의존성 구조는 **비순환 방향 그래프**여야 한다.

컴포넌트 간의 의존성 구조에 순환 의존성이 생긴다면 다음의 두가지 주요 메커니즘을 사용하여 순환을 끊어야 한다.

`Interactors -> Entities -> Authorizer -> Interactors ...`

1. 의존성 역전 원칙을 적용한다.
2. 순환 의존성이 발생하는 곳에 새로운 컴포넌트를 만든다.

#### 1. 의존성 역전 원칙 사용
Entities와 Authorizer 사이의 의존성을 역전시킨다.
- Entities의 `User`가 필요로 하는 메서드를 제공하는 인터페이스를 생성하고,
- 이 인터페이스는 Entities에 위치시키고,
- Authorizer에서는 이 인터페이스를 상속받는다.

#### 2. 새로운 컴포넌트
Entities 와 Authroizer가 모두 의존하는 새로운 컴포넌트를 만든다. 그리고 두 컴포넌트가 모두 의존하는 클래스들을 새로운 컴포넌트로 이동시킨다.

</br>

### 하향식 설계 (top-down)
컴포넌트 구조는 하향식으로 설계될 수 없다.

(top-down 하향식: 가장 큰것 부터 계획하고 뼈대를 만들어서 진행하는 것) </br>
(bottom-up 상향식: 작은 구성부터 만들어서 마지막에 이어 붙이는 방식)

</br>

### SDP: 안정된 의존성 원칙
안정된 방향으로 (더 안정된 쪽에) 의존하라.

모든 컴포넌트가 안정적이어야 하는 것은 아니다.

stable한 컴포넌트는 안정적이어야 하고, 안정적인 컴포넌트는 다른 컴포넌트에 의존하지 말아야 한다. (의존한다는 것은 다른 컴포넌트를 가져다 사용한다는 것과 동일하다.)


</br>

### SAP: 안정된 추상화 원칙
SAP (Stable Abstractions Principle)은 안정성과 추상화 정도 사이의 관계를 정의한다.

안정된 컴포넌트는 인터페이스와 추상 클래스로 구성되어야 한다. (쉽게 확장하기 위해서)

불안정한 컴포넌트는 반드시 구체 컴포넌트여야 한다. (컴포넌트가 불안정하므로 컴포넌트 내부의 구체적인 코드 변경이 쉽다)

</br>

### 결론

(글쓴이는 '훌륭한' 패턴을 의존성 관리 지표를 통해 설계의 의존성과 추상화 정도를 확인함으로서 측정했다. 크게 와닿지 않았다.)